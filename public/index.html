<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat</title>
    <style>
        body,
        html {
            height: 100%;
            margin: 0;
            display: flex;
            flex-direction: column;
            /* Align items in a column */
        }

        .container {
            text-align: center;
            margin-bottom: auto;
            /* Push container to the top */
        }

        .messages-container {
            flex-grow: 1;
            /* Allow the messages container to grow to fill remaining space */
            overflow-y: auto;
            /* Add vertical scrollbar if messages overflow */
            padding: 10px;
        }

        .sender-message {
            align-self: flex-end;
            /* Align sender messages to the right */
            background-color: rgb(61, 121, 61);
            /* Green color for sender's messages */
            color: white;
            border-radius: 10px;
            padding: 8px 12px;
            margin-bottom: 10px;
            /* Push sender's messages to the right */
        }

        .receiver-message {
            align-self: flex-start;
            /* Align receiver messages to the left */
            background-color: #ECE5DD;
            /* Light gray color for receiver's messages */
            color: black;
            border-radius: 10px;
            padding: 8px 12px;
            margin-bottom: 10px;
            /* Push receiver's messages to the left */
        }

        .input-container {
            text-align: center;
            margin-top: auto;
            /* Push input container to the bottom */
        }

        .input-field {
            padding: 6px;
            border-radius: 10px;
            transition: background-color 0.3s;
            /* Add transition for smooth hover effect */
            width: calc(50% - 50px);
            /* Adjust width to accommodate button */
        }

        .input-field:hover {
            background-color: #f0f0f0;
            /* Change background color on hover */
        }

        .send-button {
            padding: 5px 10px;
            border: none;
            border-radius: 10px;
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <div class="messages-container" id="messagesContainer">
        <!-- Messages will be added dynamically here -->
    </div>
    <div class="input-container">
        <form id="form" action="">
            <input id="input" autocomplete="off" class="input-field" /> <br> <br>
            <button class="send-button">Send</button> <br><br>
        </form>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();

        // Listen for initial messages emitted by the server
        socket.on('initialMessages', (messages) => {
            // Handle initial messages received from the server
            messages.forEach((message) => {
                // Render messages in the UI (e.g., append them to a message container)
                renderMessage(message);
            });
        });

        // Function to render a message in the UI
        function renderMessage(message) {
            const messageContainer = document.getElementById('messagesContainer');
            const messageElement = document.createElement('div');
            messageElement.textContent = message.message;
            messageElement.classList.add(message.from_ === 1 ? 'sender-message' : 'receiver-message');
            messageContainer.appendChild(messageElement);
        }
    </script>
</body>

</html>